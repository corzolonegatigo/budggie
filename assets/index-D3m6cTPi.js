import{initializeApp as m}from"https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";import{getFirestore as u,collection as p,doc as n,getDoc as g,updateDoc as c,setDoc as f}from"https://www.gstatic.com/firebasejs/10.9.0/firebase-firestore.js";function w(){const t=document.querySelector(".animation-box");t.classList.toggle("hidden");const e=document.querySelector(".cover-back");e.classList.toggle("hidden");const o=Lottie.loadAnimation({container:document.getElementById("lottie-container"),renderer:"svg",loop:!0,autoplay:!0,path:"./public/lottie.json"});setTimeout(()=>{o.stop(),t.classList.toggle("hidden"),e.classList.toggle("hidden"),window.location.href="./main.html"},3e3)}const h={apiKey:"AIzaSyCN3Z-SsOdmoFOLZP6NKiW9wDjMmA1M2bI",authDomain:"ipapps1.firebaseapp.com",projectId:"ipapps1",storageBucket:"ipapps1.firebasestorage.app",messagingSenderId:"386365310550",appId:"1:386365310550:web:959c17361a7daee6705df7"},y=m(h),S=u(y),a=p(S,"users");async function b(t){if(t){const e=n(a,t);console.log(e);const o=await g(e);if(o.exists())return o}return!1}async function U(t,e,o,r,s){const l=n(a,t),i={username:t,password:e,email:o,card:JSON.stringify(r),profilepic:s,currentitem:"",itemprogress:0};try{await f(l,i),window.localStorage.setItem("Userdata",JSON.stringify(i)),window.location.href="./main.html"}catch(d){console.error("Error adding user:",d)}}async function v(t,e){try{const o=await b(t);if(o!==!1){const r=o.data(),s=r.password;if(e===s)return window.localStorage.setItem("Userdata",JSON.stringify(r)),window.location.href="./main.html",!0}}catch(o){console.error("Error getting user:",o)}return document.querySelector(".error").classList.remove("hidden"),!1}async function L(t,e){e.currentitem=t,e.itemprogress=0;const o=e.username;window.localStorage.setItem("Userdata",JSON.stringify(e));const r=n(a,o);try{await c(r,{currentitem:t,itemprogress:0}),window.location.href="./main.html"}catch(s){console.error("Error updating item:",s)}}async function O(t,e){const o=e.username,r=n(a,o);e.itemprogress=t,window.localStorage.setItem("Userdata",JSON.stringify(e));try{await c(r,{itemprogress:t}),w()}catch(s){console.error("Error changing numbr:",s)}}export{L as a,U as b,b as c,v as g,O as u};
