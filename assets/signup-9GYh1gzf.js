import"./style-IsFppSze.js";import"https://cdn.jsdelivr.net/npm/@lottiefiles/dotlottie-web/+esm";import"./login_signin-nl1Zzgp9.js";import{c as R,b as _}from"./index-D3m6cTPi.js";import{a as U}from"./hide_toggle-C0J1AC6A.js";import"https://cdn.jsdelivr.net/npm/three@0.154.0/build/three.module.js";import"https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";import"https://www.gstatic.com/firebasejs/10.9.0/firebase-firestore.js";document.addEventListener("DOMContentLoaded",function(){const B=document.querySelectorAll(".payment-opt"),L=document.getElementById("submit-payment-info"),r=document.getElementById("cc-no"),c=document.getElementById("ccv"),p=document.getElementById("months"),f=document.getElementById("years"),d=document.getElementById("phone-no"),u=document.getElementById("postal-code"),v=document.getElementById("imageInput"),w=document.getElementById("pfp-wrapper"),D=document.getElementById("pfp-selected"),a=new FileReader,g=document.getElementById("password-cfm"),b=document.getElementById("password");function y(e){let t=!0;console.log(e);for(const o of e)o.value===""&&(t=!1,o.value="");return t}function S(){var e=["January","February","March","April","May","June","July","August","September","October","November","December"];const o=new Date().getFullYear();for(let n=0;n<e.length;n++){const l=document.createElement("option");l.value=e[n],l.innerText=e[n],p.appendChild(l)}for(let n=0;n<10;n++){const l=document.createElement("option");l.value=o+n,l.innerText=o+n,f.appendChild(l)}}let i="",m=!1;B.forEach(e=>e.addEventListener("click",function(t){t.preventDefault(),i!==""&&i.classList.remove("payment-selected"),e.classList.add("payment-selected"),i=e,m=!0})),w.addEventListener("click",()=>{v.click()}),v.addEventListener("change",function(e){const t=e.target.files[0];console.log(!!t),t&&(a.onload=function(o){console.log(o.target.result),D.src=o.target.result},a.readAsDataURL(t))}),g.addEventListener("input",function(e){let t=document.getElementById("password-error");g.value!==b.value?t.classList.remove("hidden"):t.classList.add("hidden")}),document.getElementById("login-submit").addEventListener("click",async function(e){e.preventDefault();const t=document.querySelectorAll(".signin-field");try{let o=document.getElementById("username").value;const n=await R(o),l=y(t);console.log(n),l&&n===!1?(S(),U(),d.addEventListener("input",()=>{d.value=d.value.replace(/[^\d ]/g,"")}),u.addEventListener("input",()=>{u.value=u.value.replace(/\D/g,"")}),r.addEventListener("input",()=>{r.value=r.value.replace(/\D/g,""),r.value.length>16&&(r.value=r.value.splice(0,16),r.setCustomValidity("Too long!"))}),c.addEventListener("input",()=>{c.value=c.value.replace(/\D/g,""),c.value.length>16&&(c.value=c.value.splice(0,16),c.setCustomValidity("Too long!"))})):(console.log("here"),l?document.querySelector(".signup-error").innerText="This username is taken, please try another one.":document.querySelector(".signup-error").innerText="You have a few input fields blank!",document.querySelector(".signup-error").classList.remove("hidden"))}catch(o){console.error("Error in listener:",o)}}),L.addEventListener("click",function(e){e.preventDefault();const t=document.querySelectorAll(".payment-field");if(y(t)&&m){let l=document.getElementById("email").value,E=document.getElementById("username").value,h=document.getElementById("password").value,k=r.value,q=c.value,T=p.value,A=f.value,x=document.getElementById("cc-name").value;const I={card_number:k,ccv_num:q,cc_month:T,cc_year:A,cc_holder:x},s=document.getElementById("imageInput").files[0];console.log(document.getElementById("imageInput").files[0]);var n="";a.onload=function(C){n=C.target.result,_(E,h,l,I,n)},console.log(s),console.log(!!s),s?a.readAsDataURL(s):_(E,h,l,I,n)}else console.log("hi"),m?document.querySelector(".payment-setup-error").innerText="You have a few input fields blank!":document.querySelector(".payment-setup-error").innerText="Please select a payment method!",document.querySelector(".payment-setup-error").classList.remove("hidden")})});
